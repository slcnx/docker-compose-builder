# EdgeTool | X6

_JavaScript diagramming library_

æ¥æº: [x6.antv.vision](https://x6.antv.vision/zh/docs/api/registry/edge-tool#edge-editor)

æå–æ¨¡å¼: body

---

[presets](https://x6.antv.vision/zh/docs/api/registry/edge-tool#presets 'presets')

[vertices](https://x6.antv.vision/zh/docs/api/registry/edge-tool#vertices 'vertices')

[segments](https://x6.antv.vision/zh/docs/api/registry/edge-tool#segments 'segments')

[boundary](https://x6.antv.vision/zh/docs/api/registry/edge-tool#boundary 'boundary')

[button](https://x6.antv.vision/zh/docs/api/registry/edge-tool#button 'button')

[button-remove](https://x6.antv.vision/zh/docs/api/registry/edge-tool#button-remove 'button-remove')

[source-arrowhead å’Œ target-arrowhead](https://x6.antv.vision/zh/docs/api/registry/edge-tool#source-arrowhead-å’Œ-target-arrowhead 'source-arrowhead å’Œ target-arrowhead')

[edge-editor](https://x6.antv.vision/zh/docs/api/registry/edge-tool#edge-editor 'edge-editor')

[registry](https://x6.antv.vision/zh/docs/api/registry/edge-tool#registry 'registry')

[register](https://x6.antv.vision/zh/docs/api/registry/edge-tool#register 'register')

[unregister](https://x6.antv.vision/zh/docs/api/registry/edge-tool#unregister 'unregister')

[è‡ªå®šä¹‰å·¥å…·](https://x6.antv.vision/zh/docs/api/registry/edge-tool#è‡ªå®šä¹‰å·¥å…· 'è‡ªå®šä¹‰å·¥å…·')

# EdgeTool

é˜…è¯»æ—¶é—´çº¦ 7 åˆ†é’Ÿ

ç”±äºè¾¹é€šå¸¸æ˜¯ä¸€ä¸ªå…·æœ‰è¾ƒå°å®½åº¦çš„æŠ˜çº¿/æ›²çº¿ï¼Œå°±ä¸å¤ªæ–¹ä¾¿ä¸è¾¹è¿›è¡Œäº¤äº’ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬ä¸€æ–¹é¢åœ¨æ¸²æŸ“è¾¹çš„åŒæ—¶è¿˜æ¸²æŸ“äº†ä¸€ä¸ªä¸è¾¹åŒå½¢çŠ¶çš„ `<path>` è·¯å¾„ï¼Œä½†å®½åº¦æ›´å®½ä¸”é€æ˜çš„è¾¹ï¼Œæ¥æ–¹ä¾¿ç”¨æˆ·ä¸è¾¹è¿›è¡Œäº¤äº’ï¼›å¦å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä¸ºè¾¹æ·»åŠ ä¸€äº›å°å·¥å…·æ¥å¢å¼ºè¾¹çš„äº¤äº’èƒ½åŠ›ï¼Œå¦‚è·¯å¾„ç‚¹å°å·¥å…·ä½¿è·¯å¾„ç‚¹å¯ä»¥è¢«ç§»åŠ¨ã€çº¿æ®µå°å·¥å…·ä½¿è¾¹ä¸­çš„çº¿æ®µå¯ä»¥è¢«ç§»åŠ¨ç­‰ã€‚æˆ‘ä»¬åœ¨ `Registry.EdgeTool.presets` å‘½åç©ºé—´ä¸­æä¾›äº†ä¸€äº›è¾¹çš„å°å·¥å…·ï¼Œå¯ä»¥åœ¨ä¸‹é¢è¿™äº›åœºæ™¯ä½¿ç”¨ã€‚

åœºæ™¯ä¸€ï¼šæ·»åŠ æŒ‡å®šçš„å°å·¥å…·ã€‚

    // åˆ›å»ºè¾¹æ—¶æ·»åŠ å°å·¥å…·
    graph.addEdge({
      source,
      target,
      tools:[
        { name: 'vertices' },
        {
          name: 'button-remove',
          args: { distance: 20  },
        },
      ],
    })


    // åˆ›å»ºè¾¹åæ·»åŠ å°å·¥å…·
    edge.addTools([
      { name: 'vertices' },
      {
        name: 'button-remove',
        args: { distance: 20  },
      },
    ])

åœºæ™¯äºŒï¼šé¼ æ ‡åŠ¨æ€æ·»åŠ /åˆ é™¤å°å·¥å…·ã€‚

    graph.on('edge:mouseenter', ({ cell }) => {
      cell.addTools(
        [
          { name: 'vertices' },
          {
            name: 'button-remove',
            args: { distance: 20  },
          },
        ],
      )
    })

    graph.on('edge:mouseleave', ({ cell }) => {
      if (cell.hasTool('button-remove')) {
        cell.removeTool('button-remove')
      }
    })

åœ¨ X6 ä¸­é»˜è®¤æä¾›äº†ä»¥ä¸‹å‡ ä¸ªç”¨äºè¾¹çš„å°å·¥å…·ï¼š

- [vertices](https://x6.antv.vision/zh/docs/api/registry/edge-tool#vertices) è·¯å¾„ç‚¹å·¥å…·ï¼Œåœ¨è·¯å¾„ç‚¹ä½ç½®æ¸²æŸ“ä¸€ä¸ªå°åœ†ç‚¹ï¼Œæ‹–åŠ¨å°åœ†ç‚¹ä¿®æ”¹è·¯å¾„ç‚¹ä½ç½®ï¼ŒåŒå‡»å°åœ†ç‚¹åˆ é™¤è·¯å¾„ç‚¹ï¼Œåœ¨è¾¹ä¸Šå•å‡»æ·»åŠ è·¯å¾„ç‚¹ã€‚
- [segments](https://x6.antv.vision/zh/docs/api/registry/edge-tool#segments) çº¿æ®µå·¥å…·ã€‚åœ¨è¾¹çš„æ¯æ¡çº¿æ®µçš„ä¸­å¿ƒæ¸²æŸ“ä¸€ä¸ªå·¥å…·æ¡ï¼Œå¯ä»¥æ‹–åŠ¨å·¥å…·æ¡è°ƒæ•´çº¿æ®µä¸¤ç«¯çš„è·¯å¾„ç‚¹çš„ä½ç½®ã€‚
- [boundary](https://x6.antv.vision/zh/docs/api/registry/edge-tool#boundary) æ ¹æ®è¾¹çš„åŒ…å›´ç›’æ¸²æŸ“ä¸€ä¸ªåŒ…å›´è¾¹çš„çŸ©å½¢ã€‚æ³¨æ„ï¼Œè¯¥å·¥å…·ä»…ä»…æ¸²æŸ“ä¸€ä¸ªçŸ©å½¢ï¼Œä¸å¸¦ä»»ä½•äº¤äº’ã€‚
- [button](https://x6.antv.vision/zh/docs/api/registry/edge-tool#button) åœ¨æŒ‡å®šä½ç½®å¤„æ¸²æŸ“ä¸€ä¸ªæŒ‰é’®ï¼Œæ”¯æŒè‡ªå®šä¹‰æŒ‰é’®çš„ç‚¹å‡»äº¤äº’ã€‚
- [button-remove](https://x6.antv.vision/zh/docs/api/registry/edge-tool#button-remove) åœ¨æŒ‡å®šçš„ä½ç½®å¤„ï¼Œæ¸²æŸ“ä¸€ä¸ªåˆ é™¤æŒ‰é’®ï¼Œç‚¹å‡»æ—¶åˆ é™¤å¯¹åº”çš„è¾¹ã€‚
- [source-arrowhead-å’Œ-target-arrowhead](https://x6.antv.vision/zh/docs/api/registry/edge-tool#source-arrowhead-%E5%92%8C-target-arrowhead) åœ¨è¾¹çš„èµ·ç‚¹æˆ–ç»ˆç‚¹æ¸²æŸ“ä¸€ä¸ªå›¾å½¢(é»˜è®¤æ˜¯ç®­å¤´)ï¼Œæ‹–åŠ¨è¯¥å›¾å½¢æ¥ä¿®æ”¹è¾¹çš„èµ·ç‚¹æˆ–ç»ˆç‚¹ã€‚
- [edge-editor](https://x6.antv.vision/zh/docs/api/registry/edge-tool#edge-editor) æä¾›è¾¹ä¸Šæ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ã€‚

## presets

### vertices

è·¯å¾„ç‚¹å·¥å…·ï¼Œåœ¨è·¯å¾„ç‚¹ä½ç½®æ¸²æŸ“ä¸€ä¸ªå°åœ†ç‚¹ï¼Œæ‹–åŠ¨å°åœ†ç‚¹ä¿®æ”¹è·¯å¾„ç‚¹ä½ç½®ï¼ŒåŒå‡»å°åœ†ç‚¹åˆ é™¤è·¯å¾„ç‚¹ï¼Œåœ¨è¾¹ä¸Šå•å‡»æ·»åŠ è·¯å¾„ç‚¹ã€‚

å‚æ•°

| å‚æ•°å | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
| --- | --- | --- | --- |
| attrs | KeyValue | `undefined` | å°åœ†ç‚¹çš„å±æ€§ã€‚ |
| snapRadius | number | `20` | ç§»åŠ¨è·¯å¾„ç‚¹è¿‡ç¨‹ä¸­çš„å¸é™„åŠå¾„ã€‚å½“è·¯å¾„ç‚¹ä¸é‚»è¿‘çš„è·¯å¾„ç‚¹çš„æŸä¸ªåæ ‡ `(x, y)` è·ç¦»åœ¨åŠå¾„èŒƒå›´å†…æ—¶ï¼Œå°†å½“å‰è·¯å¾„ç‚¹çš„å¯¹åº”åæ ‡ `(x, y)` å¸é™„åˆ°é‚»å±…è·¯å¾„çš„è·¯å¾„ç‚¹ã€‚ |
| addable | boolean | `true` | åœ¨è¾¹ä¸ŠæŒ‰ä¸‹é¼ æ ‡æ—¶ï¼Œæ˜¯å¦å¯ä»¥æ·»åŠ æ–°çš„è·¯å¾„ç‚¹ã€‚ |
| removable | boolean | `true` | æ˜¯å¦å¯ä»¥é€šè¿‡åŒå‡»ç§»é™¤è·¯å¾„ç‚¹ã€‚ |
| removeRedundancies | boolean | `true` | æ˜¯å¦è‡ªåŠ¨ç§»é™¤å†—ä½™çš„è·¯å¾„ç‚¹ã€‚ |
| stopPropagation | boolean | `true` | æ˜¯å¦é˜»æ­¢å·¥å…·ä¸Šçš„é¼ æ ‡äº‹ä»¶å†’æ³¡åˆ°è¾¹è§†å›¾ä¸Šã€‚é˜»æ­¢åé¼ æ ‡ä¸å·¥å…·äº¤äº’æ—¶å°†ä¸ä¼šè§¦å‘è¾¹çš„ `mousedown`ã€`mousemove` å’Œ `mouseup` äº‹ä»¶ã€‚ |

ä½¿ç”¨

    // åˆ›å»º edge æ—¶æ·»åŠ å°å·¥å…·
    const edge1 = graph.addEdge({
      ...,
      tools: {
        items: [
          {
            name: 'vertices',
            args: {
              attrs: { fill: '#666' },
            },
          },
        ],
      },
    })

    // é¼ æ ‡ Hover æ—¶æ·»åŠ å°å·¥å…·
    graph.on('edge:mouseenter', ({ cell }) => {
      if (cell === edge2) {
        cell.setTools({
          name: 'onhover',
          tools: ['vertices'],
        })
      }
    })

    graph.on('edge:mouseleave', ({ cell }) => {
      if (cell.hasTools('onhover')) {
        cell.removeTools()
      }
    })

### segments

çº¿æ®µå·¥å…·ã€‚åœ¨è¾¹çš„æ¯æ¡çº¿æ®µçš„ä¸­å¿ƒæ¸²æŸ“ä¸€ä¸ªå·¥å…·æ¡ï¼Œå¯ä»¥æ‹–åŠ¨å·¥å…·æ¡è°ƒæ•´çº¿æ®µä¸¤ç«¯çš„è·¯å¾„ç‚¹çš„ä½ç½®ã€‚

å‚æ•°

| å‚æ•°å | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
| --- | --- | --- | --- |
| attrs | object | `{width: 20, height: 8, x: -10, y: -4, rx: 4, ry: 4, fill: '#333', stroke: '#fff', stroke-width: 2}` | å…ƒç´ çš„å±æ€§ã€‚ |
| precision | number | `0.5` | çº¿æ®µçš„ä¸¤ä¸ªç«¯ç‚¹çš„ X æˆ– Y è½´çš„åæ ‡å·®å°äº `precision` æ—¶æ‰æ¸²æŸ“å·¥å…·ï¼Œé»˜è®¤ `0.5` è¡¨ç¤ºåªå¯¹å‚ç›´å’Œæ°´å¹³çº¿æ®µæ¸²æŸ“å·¥å…·ã€‚ |
| threshold | number | `40` | çº¿æ®µé•¿åº¦è¶…è¿‡ `threshold` æ—¶æ‰æ¸²æŸ“å·¥å…·ã€‚ |
| snapRadius | number | `10` | è°ƒæ•´çº¿æ®µè¿‡ç¨‹ä¸­çš„å¸é™„åŠå¾„ã€‚ |
| removeRedundancies | boolean | `true` | æ˜¯å¦è‡ªåŠ¨ç§»é™¤å†—ä½™çš„è·¯å¾„ç‚¹ã€‚ |
| stopPropagation | boolean | `true` | æ˜¯å¦é˜»æ­¢å·¥å…·ä¸Šçš„é¼ æ ‡äº‹ä»¶å†’æ³¡åˆ°è¾¹è§†å›¾ä¸Šã€‚é˜»æ­¢åé¼ æ ‡ä¸å·¥å…·äº¤äº’æ—¶å°†ä¸ä¼šè§¦å‘è¾¹çš„ `mousedown`ã€`mousemove` å’Œ `mouseup` äº‹ä»¶ã€‚ |

ä½¿ç”¨

    graph.addEdge({
      ...,
      tools: {
        name: 'segments',
        args: {
          snapRadius: 20,
          attrs: {
            fill: '#444',
          },
        },
      },
    })

### boundary

æ ¹æ®è¾¹çš„åŒ…å›´ç›’æ¸²æŸ“ä¸€ä¸ªåŒ…å›´è¾¹çš„çŸ©å½¢ã€‚æ³¨æ„ï¼Œè¯¥å·¥å…·ä»…ä»…æ¸²æŸ“ä¸€ä¸ªçŸ©å½¢ï¼Œä¸å¸¦ä»»ä½•äº¤äº’ã€‚

å‚æ•°

| å‚æ•°å  | ç±»å‹     | é»˜è®¤å€¼   | è¯´æ˜               |
| ------- | -------- | -------- | ------------------ |
| tagName | string   | `rect`   | ä½¿ç”¨ä½•ç§å›¾å½¢æ¸²æŸ“ã€‚ |
| padding | number   | `10`     | è¾¹è·ã€‚             |
| attrs   | KeyValue | `object` | å›¾å½¢å±æ€§ã€‚         |

å…¶ä¸­ `attrs` çš„é»˜è®¤å€¼(é»˜è®¤æ ·å¼)ä¸ºï¼š

    {
      fill: 'none',
      stroke: '#333',
      'stroke-width': 0.5,
      'stroke-dasharray': '5, 5',
      'pointer-events': 'none',
    }

ä½¿ç”¨

    graph.addEdge({
      ...,
      tools: {
        name: 'boundary',
        args: {
          padding: 5,
          attrs: {
            fill: '#7c68fc',
            stroke: '#333',
            'stroke-width': 0.5,
            'fill-opacity': 0.2,
          },
        },
      },
    })

### button

åœ¨æŒ‡å®šä½ç½®å¤„æ¸²æŸ“ä¸€ä¸ªæŒ‰é’®ï¼Œæ”¯æŒè‡ªå®šä¹‰æŒ‰é’®çš„ç‚¹å‡»äº¤äº’ã€‚

å‚æ•°

| å‚æ•°å | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
| --- | --- | --- | --- | --- |
| distance | number | `undefined` | åç¦»èµ·ç‚¹çš„è·ç¦»æˆ–æ¯”ä¾‹ã€‚ |
| offset | number | Point.PointLike | `0` | åœ¨ `distance` åŸºç¡€ä¸Šçš„åç§»é‡ã€‚ |
| rotate | boolean | `undefined` | æ˜¯å¦è·Ÿéšè¾¹æ—‹è½¬ã€‚ |
| markup | Markup.JSONMarkup | `undefined` | æ¸²æŸ“æŒ‰é’®çš„ Markup å®šä¹‰ã€‚ |
| onClick | (args: {e: JQuery.MouseDownEvent, cell: Cell, view: CellView }) => void | `undefined` | ç‚¹å‡»æŒ‰é’®çš„å›è°ƒå‡½æ•°ã€‚ |

ä½¿ç”¨

    graph.addEdge({
      ...,
      tools: [
        {
          name: 'button',
          args: {
            markup: [
              {
                tagName: 'circle',
                selector: 'button',
                attrs: {
                  r: 18,
                  stroke: '#fe854f',
                  'stroke-width': 2,
                  fill: 'white',
                  cursor: 'pointer',
                },
              },
              {
                tagName: 'text',
                textContent: 'Btn B',
                selector: 'icon',
                attrs: {
                  fill: '#fe854f',
                  'font-size': 10,
                  'text-anchor': 'middle',
                  'pointer-events': 'none',
                  y: '0.3em',
                },
              },
            ],
            distance: -40,
            onClick({ view }: any) {
              const edge = view.cell
              const source = edge.getSource()
              const target = edge.getTarget()
              edge.setSource(target)
              edge.setTarget(source)
            },
          },
        },
        {
          name: 'button',
          args: {
            markup: [
              {
                tagName: 'circle',
                selector: 'button',
                attrs: {
                  r: 18,
                  stroke: '#fe854f',
                  'stroke-width': 2,
                  fill: 'white',
                  cursor: 'pointer',
                },
              },
              {
                tagName: 'text',
                textContent: 'Btn A',
                selector: 'icon',
                attrs: {
                  fill: '#fe854f',
                  'font-size': 10,
                  'text-anchor': 'middle',
                  'pointer-events': 'none',
                  y: '0.3em',
                },
              },
            ],
            distance: -100,
            offset: { x: 0, y: 20 },
            onClick({ view }: any) {
              const edge = view.cell
              edge.attr({
                line: {
                  strokeDasharray: '5, 1',
                  strokeDashoffset:
                    (edge.attr('line/strokeDashoffset') | 0) + 20,
                },
              })
            },
          },
        },
      ],
    })

### button-remove

åœ¨æŒ‡å®šçš„ä½ç½®å¤„ï¼Œæ¸²æŸ“ä¸€ä¸ªåˆ é™¤æŒ‰é’®ï¼Œç‚¹å‡»æ—¶åˆ é™¤å¯¹åº”çš„è¾¹ã€‚

å‚æ•°

| å‚æ•°å | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
| --- | --- | --- | --- | --- |
| distance | number | `60` | åç¦»èµ·ç‚¹çš„è·ç¦»æˆ–æ¯”ä¾‹ã€‚ |
| offset | number | Point.PointLike | `0` | åœ¨ `distance` åŸºç¡€ä¸Šçš„åç§»é‡ã€‚ |
| rotate | boolean | `undefined` | æ˜¯å¦è·Ÿéšè¾¹æ—‹è½¬ã€‚ |
| markup | Markup.JSONMarkup | `undefined` | æ¸²æŸ“æŒ‰é’®çš„ Markup å®šä¹‰ã€‚ |
| onClick | (args: {e: JQuery.MouseDownEvent, cell: Cell, view: CellView }) => void | `undefined` | ç‚¹å‡»æŒ‰é’®çš„å›è°ƒå‡½æ•°ã€‚ |

ä½¿ç”¨

    graph.addEdge({
      ...,
      tools: {
        name: 'button-remove',
        args: { distance: -40 },
      },
    })

### source-arrowhead å’Œ target-arrowhead

åœ¨è¾¹çš„èµ·ç‚¹æˆ–ç»ˆç‚¹æ¸²æŸ“ä¸€ä¸ªå›¾å½¢(é»˜è®¤æ˜¯ç®­å¤´)ï¼Œæ‹–åŠ¨è¯¥å›¾å½¢æ¥ä¿®æ”¹è¾¹çš„èµ·ç‚¹æˆ–ç»ˆç‚¹ã€‚

å‚æ•°

| å‚æ•°å  | ç±»å‹             | é»˜è®¤å€¼   | è¯´æ˜                 |
| ------- | ---------------- | -------- | -------------------- |
| tagName | string           | `path`   | ä½¿ç”¨ä½•ç§å›¾å½¢æ¥æ¸²æŸ“ã€‚ |
| attrs   | Attr.SimpleAttrs | `object` | å›¾å½¢çš„å±æ€§ã€‚         |

å…¶ä¸­ `source-arrowhead` çš„å±æ€§é»˜è®¤å€¼ä¸º

    {
      d: 'M 10 -8 -10 0 10 8 Z',
      fill: '#333',
      stroke: '#fff',
      'stroke-width': 2,
      cursor: 'move',
    }

`target-arrowhead` çš„å±æ€§é»˜è®¤å€¼ä¸º

    {
      d: 'M -10 -8 10 0 -10 8 Z',
      fill: '#333',
      stroke: '#fff',
      'stroke-width': 2,
      cursor: 'move',
    }

ä½¿ç”¨

    graph.on('edge:mouseenter', ({ cell }) => {
      cell.addTools([
        'source-arrowhead',
        {
          name: 'target-arrowhead',
          args: {
            attrs: {
              fill: 'red',
            },
          },
        },
      ])
    })

    graph.on('edge:mouseleave', ({ cell }) => {
      cell.removeTools()
    })

### edge-editor

æä¾›è¾¹ä¸Šæ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ã€‚

å‚æ•°

| å‚æ•°å | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
| --- | --- | --- | --- |
| event | JQuery.MouseEventBase | - | è§¦å‘æ–‡æœ¬ç¼–è¾‘çš„äº‹ä»¶å‚æ•° |
| labelAddable | boolean | true | ç‚¹å‡»éæ–‡æœ¬ä½ç½®æ˜¯å¦æ–°å»º label |
| attrs/fontSize | string | `14` | ç¼–è¾‘æ–‡æœ¬å­—ä½“å¤§å° |
| attrs/color | string | `#000` | ç¼–è¾‘æ–‡æœ¬å­—ä½“é¢œè‰² |
| attrs/fontFamily | string | `Arial, helvetica, sans-serif` | ç¼–è¾‘æ–‡æœ¬çš„å­—ä½“ |
| attrs/backgroundColor | string | `#fff` | ç¼–è¾‘åŒºåŸŸçš„èƒŒæ™¯è‰² |
| getText | (this: CellView, args: {cell: Cell}) => string | - | è·å–åŸæ–‡æœ¬æ–¹æ³•ï¼Œåœ¨è‡ªå®šä¹‰ `markup` åœºæ™¯éœ€è¦è‡ªå®šä¹‰ `getText` æ–¹æ³• |
| setText | (this: CellView, args: {cell: Cell, value: string}) => void | - | è®¾ç½®æ–°æ–‡æœ¬ï¼Œåœ¨è‡ªå®šä¹‰ `markup` åœºæ™¯éœ€è¦è‡ªå®šä¹‰ `setText` æ–¹æ³• |

ä½¿ç”¨

    // åŒå‡»è¿›å…¥ç¼–è¾‘æ¨¡å¼
    graph.on('edge:dblclick', ({ cell, e }) => {
      cell.addTools({
        name: 'edge-editor',
        args: {
          event: e,
        },
      })
    })

## registry

æˆ‘ä»¬åœ¨ Registry.EdgeTool.registry å¯¹è±¡ä¸Šæä¾›äº†æ³¨å†Œå’Œå–æ¶ˆæ³¨å†Œå·¥å…·çš„æ–¹æ³•ï¼Œå·¥å…·å®é™…ä¸Šæ˜¯ä¸€ä¸ªç»§æ‰¿è‡ª ToolItem çš„[è§†å›¾](https://x6.antv.vision/zh/docs/api/view/view)ã€‚

    export type Definition = typeof ToolItem | (new (options: ToolItem.Options) => ToolItem)

ä¾‹å¦‚ï¼Œä¸Šé¢æåˆ°çš„ `'button'` å·¥å…·çš„å¯¹åº”çš„å®šä¹‰ä¸º

    export class Button extends ToolsView.ToolItem<EdgeView | NodeView, Button.Options> {
      protected onRender() { ... }
      protected onMouseDown() { ... }
    }

åˆ›å»ºå·¥å…·ç±»ä¹‹åå°±å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ `register` æ–¹æ³•æ¥æ³¨å†Œåˆ°ç³»ç»Ÿä¸­ã€‚

### register

    register(entities: { [name: string]: Definition }, force?: boolean): void
    register(name: string, entity: Definition, force?: boolean): Definition

æ³¨å†Œå·¥å…·ã€‚

### unregister

    unregister(name: string): Definition | null

å–æ¶ˆæ³¨å†Œå·¥å…·ã€‚

å®é™…ä¸Šï¼Œæˆ‘ä»¬å°† `registry` å¯¹è±¡çš„ `register` å’Œ `unregister` æ–¹æ³•åˆ†åˆ«æŒ‚è½½ä¸º `Graph` çš„ä¸¤ä¸ªé™æ€æ–¹æ³• `Graph.registerEdgeTool` å’Œ `Graph.unregisterEdgeTool`ï¼Œçœ‹ä¸‹é¢ä½¿ç”¨ç¤ºä¾‹ã€‚

### è‡ªå®šä¹‰å·¥å…·

åœºæ™¯ä¸€ï¼šç»§æ‰¿ `ToolItem` å®ç°ä¸€ä¸ªå·¥å…·ç±»ï¼Œéš¾åº¦è¾ƒé«˜ï¼Œè¦æ±‚å¯¹[è§†å›¾åŸºç±»](https://x6.antv.vision/zh/docs/api/view/view)å’Œ `ToolItem` ç±»éƒ½æœ‰æ‰€äº†è§£ï¼Œå¯ä»¥å‚è€ƒä¸Šè¿°å†…ç½®å·¥å…·çš„æºç ï¼Œè¿™é‡Œä¸å±•å¼€å™è¿°ã€‚

    Graph.registerEdgeTool('button', Button)

åœºæ™¯äºŒï¼šç»§æ‰¿å·²ç»æ³¨å†Œçš„å·¥å…·ï¼Œä¸ºç»§æ‰¿çš„å·¥å…·æŒ‡å®šé»˜è®¤é€‰é¡¹æˆ–è€…é»˜è®¤æ ·å¼ã€‚æˆ‘ä»¬åœ¨ `ToolItem` åŸºç±»ä¸Šæä¾›äº†ä¸€ä¸ªé™æ€æ–¹æ³• `define` æ¥å¿«é€Ÿå®ç°ç»§æ‰¿å¹¶é…ç½®é»˜è®¤é€‰é¡¹ã€‚

    import { Vertices } from '@antv/x6/es/registry/tool/vertices'

    const RedVertices = Vertices.define<Vertices.Options>({
      name: 'red-vertices', // å·¥å…·åç§°ï¼Œå¯çœç•¥ï¼ŒæŒ‡å®šåå…¶å¤§é©¼å³°å½¢å¼åŒæ—¶ä½œä¸ºç»§æ‰¿çš„ç±»çš„ç±»åã€‚
      attrs: {
        fill: 'red',
      },
    })

    Graph.registerEdgeTool('red-vertices', RedVertices, true)

åŒæ—¶ï¼Œæˆ‘ä»¬ä¸º `Graph.registerEdgeTool` æ–¹æ³•æä¾›äº†ä¸€ç§å¿«é€Ÿç»§æ‰¿å¹¶æŒ‡å®šé»˜è®¤é€‰é¡¹çš„å®ç°ï¼š

    Graph.registerEdgeTool('red-vertices', {
      'red-vertices',     // å·¥å…·åç§°ï¼Œå¯çœç•¥ï¼ŒæŒ‡å®šåå…¶å¤§é©¼å³°å½¢å¼åŒæ—¶ä½œä¸ºç»§æ‰¿çš„ç±»çš„ç±»åã€‚
      inherit:'vertices', // åŸºç±»åç§°ï¼Œä½¿ç”¨å·²ç»æ³¨å†Œçš„å·¥å…·åç§°ã€‚
      attrs: {            // å…¶ä»–é€‰é¡¹ï¼Œä½œä¸ºç»§æ‰¿çš„ç±»çš„é»˜è®¤é€‰é¡¹ã€‚
        fill: 'red',
      },
    })

é€šè¿‡è¯¥æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å¿«é€Ÿå®šä¹‰å¹¶æ³¨å†Œä¸€ä¸ªåœ†å½¢çš„ç«¯ç‚¹ `circle-target-arrowhead`ï¼š

    Graph.registerEdgeTool('circle-target-arrowhead', {
      inherit: 'target-arrowhead',
      tagName: 'circle',
      attrs: {
        r: 18,
        fill: '#31d0c6',
        'fill-opacity': 0.3,
        stroke: '#fe854f',
        'stroke-width': 4,
        cursor: 'move',
      },
    })

- [Graph](https://x6.antv.vision/zh/docs/api/graph/graph)
- [Grid](https://x6.antv.vision/zh/docs/api/graph/grid)
- [Background](https://x6.antv.vision/zh/docs/api/graph/background)
- [Snapline](https://x6.antv.vision/zh/docs/api/graph/snapline)
- [Scroller](https://x6.antv.vision/zh/docs/api/graph/scroller)
- [MiniMap](https://x6.antv.vision/zh/docs/api/graph/minimap)
- [History](https://x6.antv.vision/zh/docs/api/graph/history)
- [Clipboard](https://x6.antv.vision/zh/docs/api/graph/clipboard)
- [Keyboard](https://x6.antv.vision/zh/docs/api/graph/keyboard)
- [MouseWheel](https://x6.antv.vision/zh/docs/api/graph/mousewheel)
- [Selection](https://x6.antv.vision/zh/docs/api/graph/selecting)
- [Interaction](https://x6.antv.vision/zh/docs/api/graph/interaction)
- [Transform](https://x6.antv.vision/zh/docs/api/graph/transform)
- [View](https://x6.antv.vision/zh/docs/api/graph/view)
- [Model](https://x6.antv.vision/zh/docs/api/graph/model)
- [Coordinate](https://x6.antv.vision/zh/docs/api/graph/coordinate)
- [Other](https://x6.antv.vision/zh/docs/api/graph/other)

- [Cell](https://x6.antv.vision/zh/docs/api/model/cell)
- [Node](https://x6.antv.vision/zh/docs/api/model/node)
- [Edge](https://x6.antv.vision/zh/docs/api/model/edge)

- [View](https://x6.antv.vision/zh/docs/api/view/view)
- [CellView](https://x6.antv.vision/zh/docs/api/view/cellview)
- [NodeView](https://x6.antv.vision/zh/docs/api/view/nodeview)
- [EdgeView](https://x6.antv.vision/zh/docs/api/view/edgeview)

- [Attr](https://x6.antv.vision/zh/docs/api/registry/attr)
- [PortLayout](https://x6.antv.vision/zh/docs/api/registry/port-layout)
- [PortLabelLayout](https://x6.antv.vision/zh/docs/api/registry/port-label-layout)
- [NodeAnchor](https://x6.antv.vision/zh/docs/api/registry/node-anchor)
- [EdgeAnchor](https://x6.antv.vision/zh/docs/api/registry/edge-anchor)
- [ConnectionPoint](https://x6.antv.vision/zh/docs/api/registry/connection-point)
- [Router](https://x6.antv.vision/zh/docs/api/registry/router)
- [Connector](https://x6.antv.vision/zh/docs/api/registry/connector)
- [Marker](https://x6.antv.vision/zh/docs/api/registry/marker)
- [Highlighter](https://x6.antv.vision/zh/docs/api/registry/highlighter)
- [NodeTool](https://x6.antv.vision/zh/docs/api/registry/node-tool)
- [EdgeTool](https://x6.antv.vision/zh/docs/api/registry/edge-tool)
- [Background](https://x6.antv.vision/zh/docs/api/registry/background)
- [Grid](https://x6.antv.vision/zh/docs/api/registry/grid)
- [Filter](https://x6.antv.vision/zh/docs/api/registry/filter)

- [Menu](https://x6.antv.vision/zh/docs/api/ui/menu)
- [Dropdown](https://x6.antv.vision/zh/docs/api/ui/dropdown)
- [ContextMenu](https://x6.antv.vision/zh/docs/api/ui/contextmenu)
- [Menubar](https://x6.antv.vision/zh/docs/api/ui/menubar)
- [Toolbar](https://x6.antv.vision/zh/docs/api/ui/toolbar)
- [SplitBox](https://x6.antv.vision/zh/docs/api/ui/splitbox)
- [ScrollBox](https://x6.antv.vision/zh/docs/api/ui/scrollbox)
- [AutoScrollBox](https://x6.antv.vision/zh/docs/api/ui/auto-scrollbox)
- [ColorPicker](https://x6.antv.vision/zh/docs/api/ui/color-picker)

- Graph \_\_

  - [Graph](https://x6.antv.vision/zh/docs/api/graph/graph)
  - [Grid](https://x6.antv.vision/zh/docs/api/graph/grid)
  - [Background](https://x6.antv.vision/zh/docs/api/graph/background)
  - [Snapline](https://x6.antv.vision/zh/docs/api/graph/snapline)
  - [Scroller](https://x6.antv.vision/zh/docs/api/graph/scroller)
  - [MiniMap](https://x6.antv.vision/zh/docs/api/graph/minimap)
  - [History](https://x6.antv.vision/zh/docs/api/graph/history)
  - [Clipboard](https://x6.antv.vision/zh/docs/api/graph/clipboard)
  - [Keyboard](https://x6.antv.vision/zh/docs/api/graph/keyboard)
  - [MouseWheel](https://x6.antv.vision/zh/docs/api/graph/mousewheel)
  - [Selection](https://x6.antv.vision/zh/docs/api/graph/selecting)
  - [Interaction](https://x6.antv.vision/zh/docs/api/graph/interaction)
  - [Transform](https://x6.antv.vision/zh/docs/api/graph/transform)
  - [View](https://x6.antv.vision/zh/docs/api/graph/view)
  - [Model](https://x6.antv.vision/zh/docs/api/graph/model)
  - [Coordinate](https://x6.antv.vision/zh/docs/api/graph/coordinate)
  - [Other](https://x6.antv.vision/zh/docs/api/graph/other)

- Model \_\_

  - [Cell](https://x6.antv.vision/zh/docs/api/model/cell)
  - [Node](https://x6.antv.vision/zh/docs/api/model/node)
  - [Edge](https://x6.antv.vision/zh/docs/api/model/edge)

- View \_\_

  - [View](https://x6.antv.vision/zh/docs/api/view/view)
  - [CellView](https://x6.antv.vision/zh/docs/api/view/cellview)
  - [NodeView](https://x6.antv.vision/zh/docs/api/view/nodeview)
  - [EdgeView](https://x6.antv.vision/zh/docs/api/view/edgeview)

- Registry \_\_

  - [Attr](https://x6.antv.vision/zh/docs/api/registry/attr)
  - [PortLayout](https://x6.antv.vision/zh/docs/api/registry/port-layout)
  - [PortLabelLayout](https://x6.antv.vision/zh/docs/api/registry/port-label-layout)
  - [NodeAnchor](https://x6.antv.vision/zh/docs/api/registry/node-anchor)
  - [EdgeAnchor](https://x6.antv.vision/zh/docs/api/registry/edge-anchor)
  - [ConnectionPoint](https://x6.antv.vision/zh/docs/api/registry/connection-point)
  - [Router](https://x6.antv.vision/zh/docs/api/registry/router)
  - [Connector](https://x6.antv.vision/zh/docs/api/registry/connector)
  - [Marker](https://x6.antv.vision/zh/docs/api/registry/marker)
  - [Highlighter](https://x6.antv.vision/zh/docs/api/registry/highlighter)
  - [NodeTool](https://x6.antv.vision/zh/docs/api/registry/node-tool)
  - [EdgeTool](https://x6.antv.vision/zh/docs/api/registry/edge-tool)
  - [Background](https://x6.antv.vision/zh/docs/api/registry/background)
  - [Grid](https://x6.antv.vision/zh/docs/api/registry/grid)
  - [Filter](https://x6.antv.vision/zh/docs/api/registry/filter)

- UI Components \_\_

  - [Menu](https://x6.antv.vision/zh/docs/api/ui/menu)
  - [Dropdown](https://x6.antv.vision/zh/docs/api/ui/dropdown)
  - [ContextMenu](https://x6.antv.vision/zh/docs/api/ui/contextmenu)
  - [Menubar](https://x6.antv.vision/zh/docs/api/ui/menubar)
  - [Toolbar](https://x6.antv.vision/zh/docs/api/ui/toolbar)
  - [SplitBox](https://x6.antv.vision/zh/docs/api/ui/splitbox)
  - [ScrollBox](https://x6.antv.vision/zh/docs/api/ui/scrollbox)
  - [AutoScrollBox](https://x6.antv.vision/zh/docs/api/ui/auto-scrollbox)
  - [ColorPicker](https://x6.antv.vision/zh/docs/api/ui/color-picker)

ğŸ‡¨ğŸ‡³AntV ç³»åˆ—ç½‘ç«™éƒ¨ç½²åœ¨ gh-pages ä¸Šï¼Œè‹¥è®¿é—®é€Ÿåº¦ä¸ä½³ï¼Œå¯ä»¥å‰å¾€ ç«™ç‚¹ã€‚

ä¸å†æé†’ç«‹å³å‰å¾€
